{"ast":null,"code":"import { Department } from '../department/Department';\nimport { Specialization } from '../specialization/Specialization';\nimport { Doctor } from './Doctor';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../service/Doctor/doctor.service\";\nimport * as i3 from \"../service/token-storage.service\";\nimport * as i4 from \"../service/Specialization/specialization.service\";\nimport * as i5 from \"../service/department/department.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../index/index.component\";\nfunction DoctorComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Doctor Name is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, DoctorComponent_div_14_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors.required);\n  }\n}\nfunction DoctorComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Contact is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, DoctorComponent_div_20_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r3 = i0.ɵɵreference(19);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.required);\n  }\n}\nfunction DoctorComponent_div_26_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Doctor Address is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, DoctorComponent_div_26_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r5 = i0.ɵɵreference(25);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors.required);\n  }\n}\nfunction DoctorComponent_option_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const spec_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", spec_r12.specId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", spec_r12.specId, \" \", spec_r12.speciality, \" \");\n  }\n}\nfunction DoctorComponent_option_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const dept_r13 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", dept_r13.deptId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", dept_r13.deptId, \" \", dept_r13.deptName, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nexport let DoctorComponent = /*#__PURE__*/(() => {\n  var _class;\n  class DoctorComponent {\n    constructor(router, ds, route, tss, spSer, deptSer, renderer) {\n      this.router = router;\n      this.ds = ds;\n      this.route = route;\n      this.tss = tss;\n      this.spSer = spSer;\n      this.deptSer = deptSer;\n      this.renderer = renderer;\n      this.btn = 'save';\n      this.doc = new Doctor();\n      this.spec = new Specialization();\n      this.dept = new Department();\n    }\n    ngOnInit() {\n      this.renderer.setStyle(document.body, 'background-color', '#C3E6FC');\n      if (this.tss.getToken()) {\n        if (this.route.snapshot.params['id'] > 0) {\n          this.btn = 'Update';\n          this.id = this.route.snapshot.params['id'];\n          this.getDoctor();\n        }\n        this.getDept();\n        this.getSpec();\n      } else {\n        this.router.navigate(['login']);\n      }\n    }\n    getDept() {\n      this.deptSer.getAllDepartment().subscribe(list => {\n        this.deptList = list;\n      });\n    }\n    getSpec() {\n      this.spSer.getAllSpecialization().subscribe(list => {\n        this.specList = list;\n      });\n    }\n    getDoctor() {\n      this.ds.getDoctorById(this.id).subscribe(data => {\n        this.doc = data;\n      }, error => {\n        console.log(error);\n      });\n    }\n    onSubmit() {\n      if (this.id > 0) {\n        this.update();\n      } else {\n        // this.save();\n        console.log(this.doc);\n        this.check();\n      }\n    }\n    update() {\n      this.ds.updateDoctor(this.id, this.doc).subscribe(data => {\n        console.log(data);\n        alert(\"Doctor updated successfully\");\n        this.gotoNext();\n      }, error => {\n        console.log(error);\n        alert(\"can't update your data\");\n      });\n    }\n    check() {\n      this.ds.checkIsAvailable(this.doc).subscribe(res => {\n        console.log(res.available);\n        if (!res.available) {\n          this.save();\n        } else {\n          alert('Doctor already exists');\n        }\n      }, error => console.log(error));\n    }\n    save() {\n      this.ds.addDoctor(this.doc).subscribe(data => {\n        console.log(data);\n        alert(\"Doctor added successfully\");\n        this.gotoNext();\n      }, error => {\n        console.log(error);\n        alert('can not save your data');\n      });\n    }\n    gotoNext() {\n      this.router.navigate(['doctorList']);\n    }\n    reset() {\n      this.doc.doctorName = null;\n      this.doc.doctorPhoneNO = null;\n      this.doc.doctorAddress = null;\n      this.doc.department.deptId = null;\n      this.doc.specialization.specId = null;\n    }\n  }\n  _class = DoctorComponent;\n  _class.ɵfac = function DoctorComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.DoctorService), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.TokenStorageService), i0.ɵɵdirectiveInject(i4.SpecializationService), i0.ɵɵdirectiveInject(i5.DepartmentService), i0.ɵɵdirectiveInject(i0.Renderer2));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-doctor\"]],\n    decls: 44,\n    vars: 20,\n    consts: [[1, \"container\", 2, \"margin-top\", \"8%\"], [1, \"text-center\"], [1, \"row\", \"justify-content-center\", \"align-items-center\"], [1, \"col-10\", \"col-md-8\", \"col-lg-6\"], [\"name\", \"docForm\", \"novalidate\", \"\", 3, \"ngSubmit\"], [\"d\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"doctorName\"], [\"type\", \"text\", \"name\", \"doctorName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"doctorName\", \"ngModel\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"doctorPhoneNO\"], [\"type\", \"number\", \"name\", \"doctorPhoneNO\", \"minlength\", \"10\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"doctorPhoneNO\", \"ngModel\"], [\"for\", \"doctorAddress\"], [\"type\", \"text\", \"name\", \"doctorAddress\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"doctorAddress\", \"ngModel\"], [\"for\", \"specialization\"], [\"name\", \"specialization\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"department\"], [\"name\", \"department\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\"], [1, \"btn\", \"btn-info\", 2, \"margin-left\", \"25px\", 3, \"click\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [3, \"value\"]],\n    template: function DoctorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r14 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelement(0, \"app-index\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"h3\");\n        i0.ɵɵtext(4, \"Doctor Page\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 2)(6, \"div\", 3)(7, \"form\", 4, 5);\n        i0.ɵɵlistener(\"ngSubmit\", function DoctorComponent_Template_form_ngSubmit_7_listener() {\n          i0.ɵɵrestoreView(_r14);\n          const _r0 = i0.ɵɵreference(8);\n          return i0.ɵɵresetView(_r0.form.valid && ctx.onSubmit());\n        });\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"label\", 7);\n        i0.ɵɵtext(11, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function DoctorComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.doc.doctorName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, DoctorComponent_div_14_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 6)(16, \"label\", 11);\n        i0.ɵɵtext(17, \"Contact No\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"input\", 12, 13);\n        i0.ɵɵlistener(\"ngModelChange\", function DoctorComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.doc.doctorPhoneNO = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, DoctorComponent_div_20_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 6)(22, \"label\", 14);\n        i0.ɵɵtext(23, \"Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"input\", 15, 16);\n        i0.ɵɵlistener(\"ngModelChange\", function DoctorComponent_Template_input_ngModelChange_24_listener($event) {\n          return ctx.doc.doctorAddress = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(26, DoctorComponent_div_26_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 6)(28, \"label\", 17);\n        i0.ɵɵtext(29, \"Sepc Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"select\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function DoctorComponent_Template_select_ngModelChange_30_listener($event) {\n          return ctx.doc.specialization.specId = $event;\n        });\n        i0.ɵɵtemplate(31, DoctorComponent_option_31_Template, 2, 3, \"option\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"div\", 6)(33, \"label\", 20);\n        i0.ɵɵtext(34, \"department Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"select\", 21);\n        i0.ɵɵlistener(\"ngModelChange\", function DoctorComponent_Template_select_ngModelChange_35_listener($event) {\n          return ctx.doc.department.deptId = $event;\n        });\n        i0.ɵɵtemplate(36, DoctorComponent_option_36_Template, 2, 3, \"option\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(37, \"br\");\n        i0.ɵɵelementStart(38, \"button\", 22);\n        i0.ɵɵtext(39);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"button\", 23);\n        i0.ɵɵlistener(\"click\", function DoctorComponent_Template_button_click_40_listener() {\n          return ctx.reset();\n        });\n        i0.ɵɵtext(41, \"reset\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(42, \"br\")(43, \"br\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(8);\n        const _r1 = i0.ɵɵreference(13);\n        const _r3 = i0.ɵɵreference(19);\n        const _r5 = i0.ɵɵreference(25);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngModel\", ctx.doc.doctorName)(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, _r0.submitted && _r1.invalid));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r0.submitted && _r1.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.doc.doctorPhoneNO)(\"ngClass\", i0.ɵɵpureFunction1(16, _c0, _r0.submitted && _r3.invalid));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r0.submitted && _r3.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.doc.doctorAddress)(\"ngClass\", i0.ɵɵpureFunction1(18, _c0, _r0.submitted && _r5.invalid));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r0.submitted && _r5.invalid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.doc.specialization.specId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.specList);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.doc.department.deptId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.deptList);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.btn);\n      }\n    },\n    dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.RequiredValidator, i7.MinLengthValidator, i7.NgModel, i7.NgForm, i8.IndexComponent]\n  });\n  return DoctorComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}